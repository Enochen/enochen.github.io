language: node_js
node_js:
  - 'stable'
cache: yarn
deploy:
  strategy: git
  provider: pages
  edge: true
  token: $GITHUB_TOKEN
  local_dir: public
  commit_message: 'Automated Deployment'
  keep_history: false
  script: 'yarn deploy'
  on:
    branch: main
branches:
  only:
    - main
before_script:
  - 'yarn install'
script:
  - 'yarn test'
